<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Hyeon, Kim">
    <title>Dummy 2048</title>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap-theme.min.css">
    <!--[if lt IE 9]>
    <script src="http://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="http://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <style>
      body { margin: 80px 10px; }

      #app {
        width: 422px;
        margin-left: auto;
        margin-right: auto;
      }

      #app > h1 { font-size: 80px; }

      #grid {
        margin-top: 40px;

        padding: 2px;
        border: 1px solid #ccc;
        border-radius: 8px;
      }

      #grid div {
        width: 100px;
        height: 100px;
        line-height: 100px;

        text-align: center;
        font-family: 'Clear Sans', 'Helvetica Neue', Arial, sans-serif;
        font-size: 35px;
        font-weight: bold;

        border: 1px solid #ccc;
        margin: 2px;
        border-radius: 4px;
      }

      @media (max-width: 500px) {
        body { margin: 40px 10px; }

        #app { width: 342px; }
        #app > h1 { font-size: 60px; }

        #grid div {
          width: 80px;
          height: 80px;
          line-height: 80px;
        }
      }
    </style>
  </head>
  <body>
    <div id="app">

      <h1><small>Dummy</small> 2048</h1>
      <p>Made by Hyeon, Kim</p>

      <div id="grid">
        <table>
          <tr>
            <td><div id="0-0"></div></td>
            <td><div id="0-1"></div></td>
            <td><div id="0-2"></div></td>
            <td><div id="0-3"></div></td>
          </tr>
          <tr>
            <td><div id="1-0"></div></td>
            <td><div id="1-1"></div></td>
            <td><div id="1-2"></div></td>
            <td><div id="1-3"></div></td>
          </tr>
          <tr>
            <td><div id="2-0"></div></td>
            <td><div id="2-1"></div></td>
            <td><div id="2-2"></div></td>
            <td><div id="2-3"></div></td>
          </tr>
          <tr>
            <td><div id="3-0"></div></td>
            <td><div id="3-1"></div></td>
            <td><div id="3-2"></div></td>
            <td><div id="3-3"></div></td>
          </tr>
        </table>
      </div><!-- div#grid -->

    </div><!-- div#app -->

    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script>
      'use strict';

      // Game object
      var game = (function() {
        var grid = [
          [null, null, null, null],
          [   2, null, null, null],
          [null, null, null,    2],
          [null, null, null, null],
        ];

        return {
          // game.forEach( function(row, col, value) { ... } );
          forEach: function(handler) {
            for (var row = 0; row < 4; ++row) for (var col = 0; col < 4; ++col) {
              var value = grid[row][col];
              if (!value) continue;
              handler(row, col, value);
            }
          },

          // game.move(game.left);
          // game.move(event.which);
          left:  37,
          up:    38,
          right: 39,
          down:  40,
          move: function(cmd) {
            switch(cmd) {
            case this.left:
              console.log('왼쪽');
              break;
            case this.right:
              console.log('오른쪽');
              break;
            case this.up:
              console.log('위');
              break;
            case this.down:
              console.log('아래');
              break;
            }
          },
        };
      })();


      // UI controller
      $(function() {
        game.forEach(function(row, col, value) {
          $('#'+row+'-'+col).text(value);
        });

        $(window).keydown(function(e) {
          e.preventDefault();

          game.move(e.which);
        });
      });
    </script>
  </body>
</html>
