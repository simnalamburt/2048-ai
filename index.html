<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Hyeon, Kim">
    <title>Dummy 2048</title>
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/normalize/3.0.1/normalize.min.css">
    <style>
      * {
        -webkit-box-sizing: border-box;
           -moz-box-sizing: border-box;
                box-sizing: border-box;
      }

      body {
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-size: 15px;
      }

      h1 {
        font-size: 80px;
        font-weight: 500;
        line-height: 1.1;
      }

      small {
        font-size: 65%;
        font-weight: 400;
        line-height: 1;
        color: #999;
      }

      #app {
        width: 422px;
        margin-left: auto;
        margin-right: auto;
      }

      #grid {
        padding: 2px;
        border: 1px solid #ccc;
        border-radius: 8px;
      }

      #grid div {
        width: 100px;
        height: 100px;
        line-height: 100px;

        text-align: center;
        font-size: 35px;
        font-weight: bold;

        border: 1px solid #ccc;
        margin: 2px;
        border-radius: 4px;
      }

      @media (max-width: 500px) {
        body { margin: 40px 10px; }

        h1 { font-size: 60px; }

        #app { width: 342px; }

        #grid div {
          width: 80px;
          height: 80px;
          line-height: 80px;
        }
      }
    </style>
  </head>
  <body>
    <div id="app">
      <h1><small>Dummy</small> 2048</h1>

      <div id="grid">
        <table>
          <tr>
            <td><div id="0-0"></div></td>
            <td><div id="0-1"></div></td>
            <td><div id="0-2"></div></td>
            <td><div id="0-3"></div></td>
          </tr>
          <tr>
            <td><div id="1-0"></div></td>
            <td><div id="1-1"></div></td>
            <td><div id="1-2"></div></td>
            <td><div id="1-3"></div></td>
          </tr>
          <tr>
            <td><div id="2-0"></div></td>
            <td><div id="2-1"></div></td>
            <td><div id="2-2"></div></td>
            <td><div id="2-3"></div></td>
          </tr>
          <tr>
            <td><div id="3-0"></div></td>
            <td><div id="3-1"></div></td>
            <td><div id="3-2"></div></td>
            <td><div id="3-3"></div></td>
          </tr>
        </table>
      </div><!-- div#grid -->

      <p><small>Made by Hyeon, Kim</small></p>
    </div><!-- div#app -->

    <script src="http://code.jquery.com/jquery.min.js"></script>
    <script>
      'use strict';

      // Constants
      var direction = {
        left:  37,
        up:    38,
        right: 39,
        down:  40,
      };

      // Game object
      var game = (function() {
        var grid = [
          [null, null, null, null],
          [   2, null, null, null],
          [null, null, null,    2],
          [null, null, null, null],
        ];

        return {
          // game.forEach( function(row, col, value) { ... } );
          forEach: function(handler) {
            for (var row = 0; row < 4; ++row) for (var col = 0; col < 4; ++col) {
              handler(row, col, grid[row][col]);
            }
          },

          // game.move(game.left);
          // game.move(event.which);
          move: function(cmd) {
            switch(cmd) {
            case direction.left:
              console.log('왼쪽');
              break;
            case direction.right:
              console.log('오른쪽');
              break;
            case direction.up:
              console.log('위');
              break;
            case direction.down:
              console.log('아래');
              break;
            }
          },
        };
      })();


      // UI controller
      $(function() {
        var present = function() {
          game.forEach(function(row, col, value) {
            $('#'+row+'-'+col).text(value ? value : '');
          });
        };

        present();

        $(window).keydown(function(e) {
          e.preventDefault();

          game.move(e.which);
          present();
        });
      });
    </script>
  </body>
</html>
